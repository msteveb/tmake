storage none
pageformat raw

accesslevel status

field type {
	stdmode hidden
	default hour
}

display {
	package require rrdgraph

	# Easy debugging
	if {0 && [file exists /tmp/rrd.test]} {
		source /tmp/rrd.test
		return
	}

	set r [rrdgraph modem state [cgi get type]]
	$r stdinit
	$r title "Modem State"
	$r ylabel "Locked"
	$r params -l 0 -u 18 -y none

	$r comment "Modem 1: "
	$r bool m1frame m1framelock -label "Frame Lock" -value 16
	$r bool m1phase m1phaselock -label "Phase Lock" -value 14
	$r bool m1timing m1timinglock -label "Timing Lock" -value 12
	$r bool m1txlo m1txlolock -label "TX LO Lock\n" -value 10

	$r comment "Modem 2: "
	$r bool m2frame m2framelock -label "Frame Lock" -value 8
	$r bool m2phase m2phaselock -label "Phase Lock" -value 6
	$r bool m2timing m2timinglock -label "Timing Lock" -value 4
	$r bool m2txlo m2txlolock -label "TX LO Lock\n" -value 2

	$r output
	$r close
}
